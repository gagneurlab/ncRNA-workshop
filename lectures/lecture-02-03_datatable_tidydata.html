<!DOCTYPE html>
<html>
<head>
  <title>Simple Data Manipulation and Visualization</title>
  <meta charset="utf-8">
  <meta name="description" content="Simple Data Manipulation and Visualization">
  <meta name="author" content="Vicente Yépez, Žiga Avsec, Elaine Zosa">
  <meta name="generator" content="slidify" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/default.css" media="all" >
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/phone.css" 
    media="only screen and (max-device-width: 480px)" >
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/slidify.css" >
  <link rel="stylesheet" href="libraries/highlighters/highlight.js/css/tomorrow.css" />
  <base target="_blank"> <!-- This amazingness opens all links in a new tab. -->  <link rel=stylesheet href="libraries/widgets/bootstrap/css/bootstrap.css"></link>
<link rel=stylesheet href="libraries/widgets/quiz/css/demo.css"></link>

  
  <!-- Grab CDN jQuery, fall back to local if offline -->
  <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.min.js"></script>
  <script>window.jQuery || document.write('<script src="libraries/widgets/quiz/js/jquery.js"><\/script>')</script> 
  <script data-main="libraries/frameworks/io2012/js/slides" 
    src="libraries/frameworks/io2012/js/require-1.0.8.min.js">
  </script>
  
  

</head>
<body style="opacity: 0">
  <slides class="layout-widescreen">
    
    <!-- LOGO SLIDE -->
        <slide class="title-slide segue nobackground">
  
  <hgroup class="auto-fadein">
    <h1>Simple Data Manipulation and Visualization</h1>
    <h2>Data Tables and Tidy Data</h2>
    <p>Vicente Yépez, Žiga Avsec, Elaine Zosa<br/></p>
  </hgroup>
  
  <article></article>  
  
</slide>
    

    <!-- SLIDES -->
    <slide class="" id="slide-1" style="background:;">
  
  <article data-timings="">
    <!-- Center image on slide -->

<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.min.js"></script>

<script type='text/javascript'>
$(function() {
    $("p:has(img)").addClass('centered');
});
</script>

<!-- 
setwd('./lectures/')
-->

<!-- START LECTURE -->

<h2>Part I: Dealing with data tables</h2>

<ul>
<li>What is a data.table? How is it different from a data.frame?</li>
<li>Basic operations on data tables: creating, editing, subsetting, manipulating, sorting</li>
<li>Do operations <em>by</em> some type or category</li>
<li>Add, update or eliminate columns using <code>:=</code></li>
<li>Merge / join data tables</li>
</ul>

<p><strong>Resources:</strong></p>

<ul>
<li><a href="https://cran.r-project.org/web/packages/data.table/">https://cran.r-project.org/web/packages/data.table/</a></li>
<li><a href="https://s3.amazonaws.com/assets.datacamp.com/img/blog/data+table+cheat+sheet.pdf">https://s3.amazonaws.com/assets.datacamp.com/img/blog/data+table+cheat+sheet.pdf</a></li>
<li><a href="http://r4ds.had.co.nz/relational-data.html">http://r4ds.had.co.nz/relational-data.html</a></li>
<li><a href="http://adv-r.had.co.nz/Environments.html">http://adv-r.had.co.nz/Environments.html</a></li>
</ul>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-2" style="background:;">
  
  <hgroup>
    <h2>What is a data.table?</h2>
  </hgroup>
  
  <article data-timings="">
    <ul>
<li>Similar to a data.frame, but because it modifies columns by <em>reference</em>, it is more memory efficient and offers faster:

<ul>
<li>subsetting</li>
<li>ordering</li>
<li>merging</li>
</ul></li>
<li>Accepts all data.frame functions</li>
<li>Shorter and more flexible syntax</li>
<li>Saves time on two fronts:

<ul>
<li>programming (easier to code, read, debug and maintain)</li>
<li>computing</li>
</ul></li>
<li>Like data.frame, data.table is a list of vectors

<ul>
<li>Doesn&#39;t have rownames; instead, it&#39;s a collection of attributes</li>
</ul></li>
<li>Each column can be a different type, including a list</li>
<li>It has enhanced functionality in <code>[</code>. We can make operations inside <code>[]</code>.</li>
</ul>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-3" style="background:;">
  
  <hgroup>
    <h2>Creating a data.table</h2>
  </hgroup>
  
  <article data-timings="">
    <pre><code class="r"># install.packages(&quot;data.table&quot;)
library(data.table)
DT &lt;- data.table(x = rep(c(&quot;a&quot;,&quot;b&quot;,&quot;c&quot;), each = 3), y = c(1, 3, 6), v = 1:9)
DT # note how column y was recycled
</code></pre>

<pre><code>##    x y v
## 1: a 1 1
## 2: a 3 2
## 3: a 6 3
## 4: b 1 4
## 5: b 3 5
## 6: b 6 6
## 7: c 1 7
## 8: c 3 8
## 9: c 6 9
</code></pre>

<pre><code class="r"># For comparison, let&#39;s make a data.frame from it:
DF &lt;- as.data.frame(DT)
</code></pre>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-4" style="background:;">
  
  <hgroup>
    <h2>Converting a data frame to data.table</h2>
  </hgroup>
  
  <article data-timings="">
    <pre><code class="r"># Using the data frame from the previous slide:
DT &lt;- as.data.table(DF)
class(DT)
</code></pre>

<pre><code>## [1] &quot;data.table&quot; &quot;data.frame&quot;
</code></pre>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-5" style="background:;">
  
  <hgroup>
    <h2>Structure</h2>
  </hgroup>
  
  <article data-timings="">
    <pre><code class="r">class(DT)
</code></pre>

<pre><code>## [1] &quot;data.table&quot; &quot;data.frame&quot;
</code></pre>

<pre><code class="r">is.list(DT)
</code></pre>

<pre><code>## [1] TRUE
</code></pre>

<pre><code class="r">summary(DT)
</code></pre>

<pre><code>##       x                   y               v    
##  Length:9           Min.   :1.000   Min.   :1  
##  Class :character   1st Qu.:1.000   1st Qu.:3  
##  Mode  :character   Median :3.000   Median :5  
##                     Mean   :3.333   Mean   :5  
##                     3rd Qu.:6.000   3rd Qu.:7  
##                     Max.   :6.000   Max.   :9
</code></pre>

<pre><code class="r">nrow(DT)   # Get the number of rows. Also try ncol(DT) and dim(DT).
</code></pre>

<pre><code>## [1] 9
</code></pre>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-6" style="background:;">
  
  <hgroup>
    <h2>Accessing a data.table by rows (<em>i</em>)</h2>
  </hgroup>
  
  <article data-timings="">
    <ul>
<li>The general form of data.table syntax is DT[i, j, by]</li>
<li>&quot;Take <strong>DT</strong>, subset rows using <strong>i</strong>, then select or calculate <strong>j</strong>, grouped by <strong>by</strong>&quot;.</li>
</ul>

<pre><code class="r">DT[2, ]   # Access the 2nd row (also DT[2] or DT[i = 2])
</code></pre>

<pre><code>##    x y v
## 1: a 3 2
</code></pre>

<pre><code class="r">DT[1:2]   # Access multiple consecutive rows.
</code></pre>

<pre><code>##    x y v
## 1: a 1 1
## 2: a 3 2
</code></pre>

<pre><code class="r">DT[c(3, 5)]  # Access multiple rows.
</code></pre>

<pre><code>##    x y v
## 1: a 6 3
## 2: b 3 5
</code></pre>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-7" style="background:;">
  
  <hgroup>
    <h2>Subsetting rows according to some condition</h2>
  </hgroup>
  
  <article data-timings="">
    <ul>
<li>We can subset a data table according to different conditions using the operators ==, &lt;, &gt;, !=, %in%.</li>
<li>To exemplify this, load the predefined &#39;iris&#39; data set as a data.table</li>
</ul>

<pre><code class="r">iris_dt &lt;- as.data.table(iris)
summary(iris_dt)
</code></pre>

<pre><code>##   Sepal.Length    Sepal.Width     Petal.Length    Petal.Width          Species  
##  Min.   :4.300   Min.   :2.000   Min.   :1.000   Min.   :0.100   setosa    :50  
##  1st Qu.:5.100   1st Qu.:2.800   1st Qu.:1.600   1st Qu.:0.300   versicolor:50  
##  Median :5.800   Median :3.000   Median :4.350   Median :1.300   virginica :50  
##  Mean   :5.843   Mean   :3.057   Mean   :3.758   Mean   :1.199                  
##  3rd Qu.:6.400   3rd Qu.:3.300   3rd Qu.:5.100   3rd Qu.:1.800                  
##  Max.   :7.900   Max.   :4.400   Max.   :6.900   Max.   :2.500
</code></pre>

<pre><code class="r"># View the species setosa. Data frame syntax: iris[iris$Species == &quot;setosa&quot;, ]
iris_dt[Species == &quot;setosa&quot;][4:6] # Note how we use double [] to subset
</code></pre>

<pre><code>##    Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1:          4.6         3.1          1.5         0.2  setosa
## 2:          5.0         3.6          1.4         0.2  setosa
## 3:          5.4         3.9          1.7         0.4  setosa
</code></pre>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-8" style="background:;">
  
  <hgroup>
    <h2>Subsetting (cont.)</h2>
  </hgroup>
  
  <article data-timings="">
    <pre><code class="r"># View all the species except setosa
iris_dt[Species != &quot;setosa&quot;][1:3]  # Same as iris_dt[Species %in% c(&quot;versicolor&quot;, &quot;virginica&quot;)]
</code></pre>

<pre><code>##    Sepal.Length Sepal.Width Petal.Length Petal.Width    Species
## 1:          7.0         3.2          4.7         1.4 versicolor
## 2:          6.4         3.2          4.5         1.5 versicolor
## 3:          6.9         3.1          4.9         1.5 versicolor
</code></pre>

<pre><code class="r"># View all flowers with a petal length greater than 6
iris_dt[Petal.Length &gt; 6][1:3]
</code></pre>

<pre><code>##    Sepal.Length Sepal.Width Petal.Length Petal.Width   Species
## 1:          7.6         3.0          6.6         2.1 virginica
## 2:          7.3         2.9          6.3         1.8 virginica
## 3:          7.2         3.6          6.1         2.5 virginica
</code></pre>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-9" style="background:;">
  
  <hgroup>
    <h2>Accessing a data.table by columns (<em>j</em>)</h2>
  </hgroup>
  
  <article data-timings="">
    <ul>
<li>DT[i, <strong>j</strong>, by]</li>
<li>Once you&#39;re inside the <code>[]</code>, you&#39;re in the data.table environment.

<ul>
<li>Inside this scope, there&#39;s no need to put the column names in quotation marks, as columns are seen as variables already.</li>
</ul></li>
<li>It is not advisable to access a column by its number. Use its name instead.

<ul>
<li>The table format can change (new columns can be added), so using names prevents bugs</li>
<li>If you have a dataset with 50 columns, how do you know which one is column 18?</li>
<li>The code is more readable: DT[, age] instead of DT[, 5].</li>
</ul></li>
</ul>

<pre><code class="r">DT[, x]    # Access column x (also DT$x or DT[j=x]). 
</code></pre>

<pre><code>## [1] &quot;a&quot; &quot;a&quot; &quot;a&quot; &quot;b&quot; &quot;b&quot; &quot;b&quot; &quot;c&quot; &quot;c&quot; &quot;c&quot;
</code></pre>

<pre><code class="r">DT[4, x]   # Access a specific cell.
</code></pre>

<pre><code>## [1] &quot;b&quot;
</code></pre>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-10" style="background:;">
  
  <hgroup>
    <h2>Data.table environment</h2>
  </hgroup>
  
  <article data-timings="">
    <ul>
<li>The following examples are to show how the <code>[]</code> bring us inside the data.table environment.</li>
<li>Using DT and DF, compute the product of columns <em>y</em> and <em>v</em>.</li>
<li>Use the <code>with(data, expr, ...)</code> function, which evaluates an R expression in an environment constructed from <code>data</code>.</li>
</ul>

<pre><code class="r">with(DT, y*v) # We enter the environment of DT, and simply compute the product
</code></pre>

<pre><code>## [1]  1  6 18  4 15 36  7 24 54
</code></pre>

<pre><code class="r">DT[, y*v] # Easier way, with [] we&#39;re inside the environment. Data.table runs a with(dt,...) on the j argument
</code></pre>

<pre><code>## [1]  1  6 18  4 15 36  7 24 54
</code></pre>

<pre><code class="r">DF[, y*v] # In data.frame, the [] doesn&#39;t imply we&#39;re inside the environment
</code></pre>

<pre><code>## Error in `[.data.frame`(DF, , y * v): object &#39;y&#39; not found
</code></pre>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-11" style="background:;">
  
  <hgroup>
    <h2>Accessing multiple columns</h2>
  </hgroup>
  
  <article data-timings="">
    <ul>
<li>When accessing many columns, we probably want to return a data.table instead of a vector.</li>
<li>For that, we need to provide R with a list, so we use <code>list(colA, colB)</code>, or its simplified version <code>.(colA, colB)</code>.</li>
</ul>

<pre><code class="r">DT[1:2, c(x,y)]   # Note that 1 and 3 were coerced into strings because a vector can have only 1 type
</code></pre>

<pre><code>## [1] &quot;a&quot; &quot;a&quot; &quot;1&quot; &quot;3&quot;
</code></pre>

<pre><code class="r">DT[1:2, list(x,y)]   # Access a specific subset. Data.frame: DF[1:2, c(&quot;x&quot;,&quot;y&quot;)] 
</code></pre>

<pre><code>##    x y
## 1: a 1
## 2: a 3
</code></pre>

<pre><code class="r">DT[1:2, .(x,y)]   # Same as before.
</code></pre>

<pre><code>##    x y
## 1: a 1
## 2: a 3
</code></pre>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-12" style="background:;">
  
  <hgroup>
    <h2>Basic Operations</h2>
  </hgroup>
  
  <article data-timings="">
    <ul>
<li>We saw already that inside the <code>[]</code>, columns are seen as variables, so we can apply functions to them.</li>
</ul>

<pre><code class="r">iris_dt[, mean(Petal.Length)]   # Similar to mean(iris_dt[, Petal.Length])
</code></pre>

<pre><code>## [1] 3.758
</code></pre>

<pre><code class="r">iris_dt[Species == &quot;virginica&quot;, mean(Petal.Length)]
</code></pre>

<pre><code>## [1] 5.552
</code></pre>

<ul>
<li>To compute operations in multiple columns, we must provide a list (unless we want the result to be a vector).</li>
</ul>

<pre><code class="r">iris_dt[, list(mean(Petal.Length), median(Petal.Length))] # Same as iris_dt[, .(mean(PL), median(PL))]
</code></pre>

<pre><code>##       V1   V2
## 1: 3.758 4.35
</code></pre>

<pre><code class="r">iris_dt[, .(mean_PL = mean(Petal.Length), median_PL = median(Petal.Length))] # Give meaningful names
</code></pre>

<pre><code>##    mean_PL median_PL
## 1:   3.758      4.35
</code></pre>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-13" style="background:;">
  
  <hgroup>
    <h2>Basic Operations on multiple columns</h2>
  </hgroup>
  
  <article data-timings="">
    <ul>
<li><code>sapply(DT, FUN)</code>, applies function FUN columnwise to DT. Remember that <code>sapply</code> returns a vector, while <code>lapply</code> returns a list.</li>
</ul>

<pre><code class="r">sapply(iris_dt, class)   # Try the same with lapply
</code></pre>

<pre><code>## Sepal.Length  Sepal.Width Petal.Length  Petal.Width      Species 
##    &quot;numeric&quot;    &quot;numeric&quot;    &quot;numeric&quot;    &quot;numeric&quot;     &quot;factor&quot;
</code></pre>

<pre><code class="r">sapply(iris_dt, sum)
</code></pre>

<pre><code>## Error in Summary.factor(structure(c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, : &#39;sum&#39; not meaningful for factors
</code></pre>

<pre><code class="r"># Note that we can access columns stored as variables by setting with=F.
# In this case, `colnames(iris_dt)!=&quot;Species&quot;` returns a logical vector and `iris_dt` is subseted by the logical vector 
sapply(iris_dt[, colnames(iris_dt)!=&quot;Species&quot;, with = F], sum) # Same as sapply(iris_dt[, 1:4], sum)
</code></pre>

<pre><code>## Sepal.Length  Sepal.Width Petal.Length  Petal.Width 
##        876.5        458.6        563.7        179.9
</code></pre>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-14" style="background:;">
  
  <hgroup>
    <h2>Question 2:</h2>
  </hgroup>
  
  <article data-timings="">
    
<div class="quiz quiz-single well ">
  <p>From DT, display a named vector with the means of <em>y</em> and <em>v</em>. The names of the elements are mean_y and mean_v.</p>

<ol>
<li><p>A <em>DT[, c(mean_y = mean(y), mean_v = mean(v))]</em></p></li>
<li><p>B DT[, list(mean_y = mean(y), mean_v = mean(v))]</p></li>
<li><p>C DT[, .(mean_y = mean(y), mean_v = mean(v))]</p></li>
</ol>

  <button class="quiz-submit btn btn-primary">Submit</button>
  <button class="quiz-toggle-hint btn btn-info">Show Hint</button>
  <button class="quiz-show-answer btn btn-success">Show Answer</button>
  <button class="quiz-clear btn btn-danger">Clear</button>
  
  
<div class="quiz-hint">
  <p>Remember which command returns a vector and which one a data.table</p>

</div>

<div class="quiz-explanation">
  <p>Including the column names inside c() will return a vector.</p>

</div>
</div>
  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-15" style="background:;">
  
  <hgroup>
    <h2>The &#39;by&#39; option</h2>
  </hgroup>
  
  <article data-timings="">
    <ul>
<li>DT[i, j, <strong>by</strong>]</li>
<li>Very useful option used to apply some function to every group of a data table.</li>
<li>Although usually <code>i</code> and <code>j</code> are ommitted from the syntax, we do write the <code>by</code>.</li>
</ul>

<pre><code class="r"># Compute the mean petal length of every species
iris_dt[, .(mean_PL = mean(Petal.Length)), by = Species]
</code></pre>

<pre><code>##       Species mean_PL
## 1:     setosa   1.462
## 2: versicolor   4.260
## 3:  virginica   5.552
</code></pre>

<pre><code class="r"># Compute the mean and sd of petal length of every species
iris_dt[, .(mean_PL = mean(Petal.Length), sd_PL = sd(Petal.Length)), by = Species]
</code></pre>

<pre><code>##       Species mean_PL     sd_PL
## 1:     setosa   1.462 0.1736640
## 2: versicolor   4.260 0.4699110
## 3:  virginica   5.552 0.5518947
</code></pre>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-16" style="background:;">
  
  <hgroup>
    <h2>The .N command</h2>
  </hgroup>
  
  <article data-timings="">
    <ul>
<li>The <code>.N</code> is a special in-built variable that counts the number observations of a particular group.</li>
</ul>

<pre><code class="r"># Get the number of observations for each species
iris_dt[, .N, by = Species]   
</code></pre>

<pre><code>##       Species  N
## 1:     setosa 50
## 2: versicolor 50
## 3:  virginica 50
</code></pre>

<ul>
<li>&quot;Take <strong>DT</strong>, subset rows using <strong>i</strong>, then select or calculate <strong>j</strong>, grouped by <strong>by</strong>&quot;</li>
</ul>

<pre><code class="r"># For each species, get the number of observations with Sepal.Width greater than 3
iris_dt[Sepal.Width &gt; 3, .(SW_greater_3 = .N), by = Species]  
</code></pre>

<pre><code>##       Species SW_greater_3
## 1:     setosa           42
## 2: versicolor            8
## 3:  virginica           17
</code></pre>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-17" style="background:;">
  
  <hgroup>
    <h2>Adding columns using :=</h2>
  </hgroup>
  
  <article data-timings="">
    <ul>
<li>The <code>:=</code> operator updates the data.table you are working on, so writing DT &lt;- DT[,... := ...] is redundant.</li>
<li>This operator, plus all <code>set</code> functions, change their input by <em>reference</em>. No copy of the object is made, that is why it is faster and uses less memory.</li>
</ul>

<pre><code class="r"># Add a new column called yv whose value is the product of y and v
DT[, yv := y*v][1:3]
</code></pre>

<pre><code>##    x y v yv
## 1: a 1 1  1
## 2: a 3 2  6
## 3: a 6 3 18
</code></pre>

<pre><code class="r"># Add columns with sepal and petal area. Note the syntax of multiple assignment.
iris_dt[, `:=` (Sepal.Area = Sepal.Length * Sepal.Width,
                Petal.Area = Petal.Length * Petal.Width)][1:3]
</code></pre>

<pre><code>##    Sepal.Length Sepal.Width Petal.Length Petal.Width Species Sepal.Area Petal.Area
## 1:          5.1         3.5          1.4         0.2  setosa      17.85       0.28
## 2:          4.9         3.0          1.4         0.2  setosa      14.70       0.28
## 3:          4.7         3.2          1.3         0.2  setosa      15.04       0.26
</code></pre>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-18" style="background:;">
  
  <hgroup>
    <h2>Manipulating and eliminating columns using :=</h2>
  </hgroup>
  
  <article data-timings="">
    <pre><code class="r"># Let&#39;s assume setosa flowers are orange, versicolor purple and virginica pink.
# Add a column with these colors.
iris_dt[Species == &quot;setosa&quot;, color := &quot;orange&quot;] 
iris_dt[Species == &quot;versicolor&quot;, color := &quot;purple&quot;]
iris_dt[Species == &quot;virginica&quot;, color := &quot;pink&quot;]
unique(iris_dt[, .(Species, color)])
</code></pre>

<pre><code>##       Species  color
## 1:     setosa orange
## 2: versicolor purple
## 3:  virginica   pink
</code></pre>

<pre><code class="r"># We can delete this new column by setting it to NULL
iris_dt[, color := NULL]
colnames(iris_dt)
</code></pre>

<pre><code>## [1] &quot;Sepal.Length&quot; &quot;Sepal.Width&quot;  &quot;Petal.Length&quot; &quot;Petal.Width&quot;  &quot;Species&quot;      &quot;Sepal.Area&quot;   &quot;Petal.Area&quot;
</code></pre>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-19" style="background:;">
  
  <hgroup>
    <h2>By reference</h2>
  </hgroup>
  
  <article data-timings="">
    <ul>
<li>What do we mean when we say that data.table modifies columns <em>by reference</em>?

<ul>
<li>No new copy of the object is made in the memory, unless we actually create one using <code>copy()</code>.</li>
</ul></li>
</ul>

<pre><code class="r">or_dt &lt;- data.table(a = 1:10, b = 11:20)
new_dt &lt;- or_dt   # No new object is created, both new_dt and or_dt point to the same memory chunk.
new_dt[, ab := a*b]
colnames(or_dt)   # or_dt was also affected by changes in new_dt
</code></pre>

<pre><code>## [1] &quot;a&quot;  &quot;b&quot;  &quot;ab&quot;
</code></pre>

<pre><code class="r">or_dt &lt;- data.table(a = 1:10, b = 11:20)
copy_dt &lt;- copy(or_dt)   # By creating a copy, we have 2 objects in memory
copy_dt[, ab := a*b]
colnames(or_dt)    # Changes in the copy don&#39;t affect the original
</code></pre>

<pre><code>## [1] &quot;a&quot; &quot;b&quot;
</code></pre>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-20" style="background:;">
  
  <hgroup>
    <h2>Merging</h2>
  </hgroup>
  
  <article data-timings="">
    <ul>
<li>Merge, join or combine 2 data tables into one by common column(s).</li>
<li><code>merge(x, y, by, by.x, by.y, all, all.x, all.y, ...)</code>

<ul>
<li>In data.table, the default is to merge by shared <em>key</em> columns.</li>
<li>In data.frame, the default is to merge by columns with the same name.</li>
<li>We can also specify the columns to merge <code>by</code>.</li>
</ul></li>
<li>There are different types of merging:

<ul>
<li><strong>Inner (default)</strong>: consider only rows with matching values in the key columns.</li>
<li><strong>Outer or full</strong>: return all rows and columns from x and y. If there are no matching values, return NAs.</li>
<li><strong>Left (all.x)</strong>: consider all rows from x, even if they have no matching row in y.</li>
<li><strong>Right (all.y)</strong>: consider all rows from y, even if they have no matching row in x.</li>
</ul></li>
</ul>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-21" style="background:;">
  
  <hgroup>
    <h2>Merging - inner and outer examples</h2>
  </hgroup>
  
  <article data-timings="">
    <pre><code class="r">( dt1 &lt;- data.table(table = &quot;table1&quot;, id = c(1,2,3), a = rnorm(3)) )
</code></pre>

<pre><code>##     table id          a
## 1: table1  1  0.6141421
## 2: table1  2 -1.2720135
## 3: table1  3  0.6748188
</code></pre>

<pre><code class="r">( dt2 &lt;- data.table(table = &quot;table2&quot;, id = c(1,2,4), b = rnorm(3)) )
</code></pre>

<pre><code>##     table id          b
## 1: table2  1 -0.5305105
## 2: table2  2 -0.3443476
## 3: table2  4  2.8530675
</code></pre>

<div style='float:left;width:48%;' class='centered'>
  <pre><code class="r"># Inner merge: default one, all = FALSE
merge(dt1, dt2, by = &quot;id&quot;, all = F)
</code></pre>

<pre><code>##    id table.x          a table.y          b
## 1:  1  table1  0.6141421  table2 -0.5305105
## 2:  2  table1 -1.2720135  table2 -0.3443476
</code></pre>

</div>
<div style='float:right;width:48%;'>
  <pre><code class="r"># Outer (full) merge: all = TRUE
merge(dt1, dt2, by = &quot;id&quot;, all = T)
</code></pre>

<pre><code>##    id table.x          a table.y          b
## 1:  1  table1  0.6141421  table2 -0.5305105
## 2:  2  table1 -1.2720135  table2 -0.3443476
## 3:  3  table1  0.6748188    &lt;NA&gt;         NA
## 4:  4    &lt;NA&gt;         NA  table2  2.8530675
</code></pre>

</div>
  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-22" style="background:;">
  
  <hgroup>
    <h2>Merging - left and right examples</h2>
  </hgroup>
  
  <article data-timings="">
    <ul>
<li>Note that the column order got changed after the merging.</li>
</ul>

<div style='float:left;width:48%;' class='centered'>
  <pre><code class="r"># Left merge: all.x = TRUE
merge(dt1, dt2, by = &quot;id&quot;, all.x = T)[]
</code></pre>

<pre><code>##    id table.x          a table.y          b
## 1:  1  table1  0.6141421  table2 -0.5305105
## 2:  2  table1 -1.2720135  table2 -0.3443476
## 3:  3  table1  0.6748188    &lt;NA&gt;         NA
</code></pre>

</div>
<div style='float:right;width:48%;'>
  <pre><code class="r"># Right merge: all.y = TRUE
merge(dt1, dt2, by = &quot;id&quot;, all.y = T)[]
</code></pre>

<pre><code>##    id table.x          a table.y          b
## 1:  1  table1  0.6141421  table2 -0.5305105
## 2:  2  table1 -1.2720135  table2 -0.3443476
## 3:  4    &lt;NA&gt;         NA  table2  2.8530675
</code></pre>

</div>
  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-23" style="background:;">
  
  <hgroup>
    <h2>Question 3:</h2>
  </hgroup>
  
  <article data-timings="">
    
<div class="quiz quiz-single well ">
  <p>As part of a new project, you got the results of a set of experiments from a lab in a data.table (x) with 3 columns: experiment id, sample id and value. On each experiment, more than one sample was measured. On another data.table (y) you got the dates of all the experiments the lab has made after a certain date. Some experiments are not part of your project, but the lab did not subset the table. Before a certain date, the lab could not find the experiments date, but you don&#39;t want to discard those results. You want to merge both data tables in order to have only one with 4 columns: experiment id, sample id, value and experiment date. Which merge would you use?</p>

<ol>
<li><p>A Inner, all = FALSE</p></li>
<li><p>B Full, all = TRUE</p></li>
<li><p>C <em>Left, all.x = TRUE</em></p></li>
<li><p>D Right, all.y = TRUE</p></li>
</ol>

  <button class="quiz-submit btn btn-primary">Submit</button>
  <button class="quiz-toggle-hint btn btn-info">Show Hint</button>
  <button class="quiz-show-answer btn btn-success">Show Answer</button>
  <button class="quiz-clear btn btn-danger">Clear</button>
  
  
<div class="quiz-hint">
  <p>Sketch both data tables if necessary.</p>

</div>

<div class="quiz-explanation">
  <p>Inner join will omit the experiments whose dates are not provided.
Full join will add rows of the experiments we are not interested in.
Left join will leave the rows we are interested in and simply add the dates when available and NAs when not.
Right join will leave us with experiments we are not interested and omit ones that we are interested but don&#39;t have the date.</p>

</div>
</div>
  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-24" style="background:;">
  
  <hgroup>
    <h2>Summary</h2>
  </hgroup>
  
  <article data-timings="">
    <p>By now, you should be able to answer the following questions:</p>

<ul>
<li>Why do we say that data.table is an enhanced data.frame?</li>
<li>How to subset by rows or columns? Remember: DT[i, j, by].</li>
<li>How to add columns?</li>
<li>How to make operations with different columns?</li>
<li>Which are the different types of merging?</li>
</ul>

<p>Even if you were able to answer them, practice:</p>

<ul>
<li>Check all vignettes and reference manual from <a href="https://cran.r-project.org/web/packages/data.table/">https://cran.r-project.org/web/packages/data.table/</a></li>
<li>A really concise cheatsheet: 

<ul>
<li><a href="https://s3.amazonaws.com/assets.datacamp.com/img/blog/data+table+cheat+sheet.pdf">https://s3.amazonaws.com/assets.datacamp.com/img/blog/data+table+cheat+sheet.pdf</a></li>
</ul></li>
</ul>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-25" style="background:;">
  
  <hgroup>
    <h2>Part II: Tidy data</h2>
  </hgroup>
  
  <article data-timings="">
    <ul>
<li>What is tidy data?</li>
<li>How to transform a messy dataset into a tidy one?

<ul>
<li>Melt and Cast (wide data &lt;-&gt; long data)</li>
<li>Separate and Unite (1 variable &lt;-&gt; more variables)</li>
</ul></li>
<li>Un-tidy data</li>
</ul>

<!-- Missing values (explicit, implicit) -->

<p>Resources:</p>

<ul>
<li><a href="http://vita.had.co.nz/papers/tidy-data.pdf">http://vita.had.co.nz/papers/tidy-data.pdf</a> </li>
<li><a href="http://r4ds.had.co.nz/tidy-data.html">http://r4ds.had.co.nz/tidy-data.html</a></li>
<li><a href="https://www.r-bloggers.com/reshape-and-aggregate-data-with-the-r-package-reshape2/">https://www.r-bloggers.com/reshape-and-aggregate-data-with-the-r-package-reshape2/</a></li>
<li><a href="http://stackoverflow.com/questions/21435339/data-table-vs-dplyr-can-one-do-something-well-the-other-cant-or-does-poorly">data.table vs dplyr</a></li>
</ul>

<p>Useful packages: <code>data.table</code>, <code>tidyr</code>, (<code>reshape2</code>, <code>dplyr</code>, <code>plyr</code>)</p>

<pre><code>## Warning in file(filename, &quot;r&quot;, encoding = encoding): cannot open file &#39;../config.R&#39;: No such file or directory
</code></pre>

<pre><code>## Error in file(filename, &quot;r&quot;, encoding = encoding): cannot open the connection
</code></pre>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-26" style="background:;">
  
  <hgroup>
    <h2>Set up</h2>
  </hgroup>
  
  <article data-timings="">
    <pre><code class="r">library(data.table) # melt, dcast, ...
library(magrittr)  # pipe operator %&gt;% 
suppressMessages(library(tidyr)) # table1, table2, ...

# Data used throughout the lecture
table1 &lt;- tidyr::table1 %&gt;% as.data.table # use data.table instead of tibble
table2 &lt;- tidyr::table2 %&gt;% as.data.table
table3 &lt;- tidyr::table3 %&gt;% as.data.table
table4a &lt;- tidyr::table4a %&gt;% as.data.table
table4b &lt;- tidyr::table4b %&gt;% as.data.table
table5 &lt;- tidyr::table5 %&gt;% as.data.table
</code></pre>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-27" style="background:;">
  
  <hgroup>
    <h2>Pipe operator <code>%&gt;%</code></h2>
  </hgroup>
  
  <article data-timings="">
    <ul>
<li>conceptually similar to the unix pipe: <code>$ cat file.txt | sort -u | head</code></li>
<li>makes the code more readable</li>
<li>typical use cases:

<ul>
<li>exploratory analysis at the command line: <code>dt %&gt;% unique %&gt;% head</code></li>
<li>dplyr data table operations</li>
</ul></li>
<li><a href="http://r4ds.had.co.nz/pipes.html">http://r4ds.had.co.nz/pipes.html</a></li>
</ul>

<div style='float:left;width:48%;' class='centered'>
  <pre><code class="r">foo &lt;- little_bunny()
</code></pre>

<pre><code class="r">foo &lt;- hop(foo, through = forest)
foo &lt;- scoop(foo, up = field_mice)
foo &lt;- bop(foo, on = head)
</code></pre>

<pre><code class="r">foo %&gt;%
  hop(through = forest) %&gt;%
  scoop(up = field_mouse) %&gt;%
  bop(on = head)
</code></pre>

</div>
<div style='float:right;width:48%;'>
  <pre><code class="r">## Argument not occuring first:
## use .
&quot;hop_scoop_bop&quot; %&gt;% gsub(&quot;_&quot;, &quot; &quot;, .)
</code></pre>

<pre><code>## [1] &quot;hop scoop bop&quot;
</code></pre>

</div>
  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-28" style="background:;">
  
  <hgroup>
    <h2>Tidy data definition</h2>
  </hgroup>
  
  <article data-timings="">
    <ol>
<li>Each <strong>variable</strong> must have its own <strong>column</strong>.</li>
<li>Each <strong>observation</strong> must have its own <strong>row</strong>.</li>
<li>Each <strong>value</strong> must have its own <strong>cell</strong>.</li>
</ol>

<pre><code class="r">table1
</code></pre>

<pre><code>##        country year  cases population
## 1: Afghanistan 1999    745   19987071
## 2: Afghanistan 2000   2666   20595360
## 3:      Brazil 1999  37737  172006362
## 4:      Brazil 2000  80488  174504898
## 5:       China 1999 212258 1272915272
## 6:       China 2000 213766 1280428583
</code></pre>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-29" style="background:;">
  
  <hgroup>
    <h2>Tidy data definition</h2>
  </hgroup>
  
  <article data-timings="">
    <ol>
<li>Each <strong>variable</strong> must have its own <strong>column</strong>.</li>
<li>Each <strong>observation</strong> must have its own <strong>row</strong>.</li>
<li>Each <strong>value</strong> must have its own <strong>cell</strong>.</li>
</ol>

<p><img src="assets/img/lec05_tidy-1.png" alt="tidy data"></p>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-30" style="background:;">
  
  <hgroup>
    <h2>Common signs of un-tidy datasets</h2>
  </hgroup>
  
  <article data-timings="">
    <ul>
<li>Column headers are values, not variable names.</li>
<li>Multiple variables are stored in one column.</li>
<li>Variables are stored in both rows and columns.</li>
<li>Multiple types of observational units are stored in the same table.</li>
<li>A single observational unit is stored in multiple tables.</li>
</ul>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-31" style="background:;">
  
  <hgroup>
    <h2>Column headers are values, not variable names</h2>
  </hgroup>
  
  <article data-timings="">
    <p>Un-tidy: 1999 and 2000 are values of the variable <em>year</em>.</p>

<pre><code class="r">table4a
</code></pre>

<pre><code>##        country   1999   2000
## 1: Afghanistan    745   2666
## 2:      Brazil  37737  80488
## 3:       China 212258 213766
</code></pre>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-32" style="background:;">
  
  <hgroup>
    <h2>Column headers are values, not variable names</h2>
  </hgroup>
  
  <article data-timings="">
    <p>Un-tidy</p>

<p><img src="assets/img/lec05_untidy_rel.png" alt="Religion dataset"></p>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-33" style="background:;">
  
  <hgroup>
    <h2>Column headers are values, not variable names</h2>
  </hgroup>
  
  <article data-timings="">
    <p>Tidy</p>

<p><img src="assets/img/lec05_tidy_rel.png" alt="Religion dataset"></p>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-34" style="background:;">
  
  <hgroup>
    <h2>Multiple variables are stored in one column</h2>
  </hgroup>
  
  <article data-timings="">
    <p>Un-tidy</p>

<pre><code class="r">table3
</code></pre>

<pre><code>##        country year              rate
## 1: Afghanistan 1999      745/19987071
## 2: Afghanistan 2000     2666/20595360
## 3:      Brazil 1999   37737/172006362
## 4:      Brazil 2000   80488/174504898
## 5:       China 1999 212258/1272915272
## 6:       China 2000 213766/1280428583
</code></pre>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-35" style="background:;">
  
  <hgroup>
    <h2>Variables are stored in both rows and columns</h2>
  </hgroup>
  
  <article data-timings="">
    <ul>
<li>The variable <em>date</em> is stored across rows and columns</li>
<li>The <code>element</code> column is not a variable; it stores the names of variables</li>
</ul>

<p>Un-tidy: days of the month (d1, d2, ...) are values, not variables</p>

<p><img src="assets/img/lec05_untidy_weather.png" alt="Weather dataset"></p>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-36" style="background:;">
  
  <hgroup>
    <h2>Variables are stored in both rows and columns</h2>
  </hgroup>
  
  <article data-timings="">
    <p>Tidy</p>

<p><img src="assets/img/lec05_tidy_weather.png" alt="Weather dataset"></p>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-37" style="background:;">
  
  <hgroup>
    <h2>Multiple types of observational units are stored in the same table</h2>
  </hgroup>
  
  <article data-timings="">
    <p>Un-tidy</p>

<p><img src="assets/img/lec05_untidy_songs.png" alt="songs"></p>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-38" style="background:;">
  
  <hgroup>
    <h2>Multiple types of observational units are stored in the same table</h2>
  </hgroup>
  
  <article data-timings="">
    <p>Tidy</p>

<p><img src="assets/img/lec05_tidy_songs.png" alt="songs"></p>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-39" style="background:;">
  
  <hgroup>
    <h2>A single observational unit is stored in multiple tables</h2>
  </hgroup>
  
  <article data-timings="">
    <p>Un-tidy</p>

<pre><code>## $Afghanistan
##    year cases population
## 1: 1999   745   19987071
## 2: 2000  2666   20595360
## 
## $Brazil
##    year cases population
## 1: 1999 37737  172006362
## 2: 2000 80488  174504898
## 
## $China
##    year  cases population
## 1: 1999 212258 1272915272
## 2: 2000 213766 1280428583
</code></pre>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-40" style="background:;">
  
  <hgroup>
    <h2>Recap - same dataset, different representations</h2>
  </hgroup>
  
  <article data-timings="">
    
<div style='float:left;width:48%;' class='centered'>
  <pre><code class="r">table1
</code></pre>

<pre><code>##        country year  cases population
## 1: Afghanistan 1999    745   19987071
## 2: Afghanistan 2000   2666   20595360
## 3:      Brazil 1999  37737  172006362
## 4:      Brazil 2000  80488  174504898
## 5:       China 1999 212258 1272915272
## 6:       China 2000 213766 1280428583
</code></pre>

<pre><code class="r">head(table2)
</code></pre>

<pre><code>##        country year       type     count
## 1: Afghanistan 1999      cases       745
## 2: Afghanistan 1999 population  19987071
## 3: Afghanistan 2000      cases      2666
## 4: Afghanistan 2000 population  20595360
## 5:      Brazil 1999      cases     37737
## 6:      Brazil 1999 population 172006362
</code></pre>

</div>
<div style='float:right;width:48%;'>
  <pre><code class="r">table3
</code></pre>

<pre><code>##        country year              rate
## 1: Afghanistan 1999      745/19987071
## 2: Afghanistan 2000     2666/20595360
## 3:      Brazil 1999   37737/172006362
## 4:      Brazil 2000   80488/174504898
## 5:       China 1999 212258/1272915272
## 6:       China 2000 213766/1280428583
</code></pre>

<pre><code class="r">table4a
</code></pre>

<pre><code>##        country   1999   2000
## 1: Afghanistan    745   2666
## 2:      Brazil  37737  80488
## 3:       China 212258 213766
</code></pre>

<pre><code class="r">table4b
</code></pre>

<pre><code>##        country       1999       2000
## 1: Afghanistan   19987071   20595360
## 2:      Brazil  172006362  174504898
## 3:       China 1272915272 1280428583
</code></pre>

</div>
  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-41" style="background:;">
  
  <hgroup>
    <h2>Why is having a tidy dataset important?</h2>
  </hgroup>
  
  <article data-timings="">
    <ul>
<li>Easier manipulation using data.table commands

<ul>
<li>subsetting by rows</li>
<li>subsetting by columns</li>
<li><code>by</code> operations</li>
</ul></li>
<li>Many other tools work better with tidy data - consistent way of storing data

<ul>
<li>example: ggplot2</li>
</ul></li>
<li>Vectorized operations become easier to use</li>
</ul>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-42" style="background:;">
  
  <hgroup>
    <h2>Tidy data can be easily manipulated</h2>
  </hgroup>
  
  <article data-timings="">
    <pre><code class="r">dt &lt;- table1

# Compute rate per 10,000
dt[, rate := cases / population * 10000] # vectorized operations; dt is modified

# Compute cases per year
dt[, .(cases = sum(cases)), by = year] # note that this does not modify dt 
</code></pre>

<pre><code>##    year  cases
## 1: 1999 250740
## 2: 2000 296920
</code></pre>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-43" style="background:;">
  
  <hgroup>
    <h2>Tidy data works better with many packages</h2>
  </hgroup>
  
  <article data-timings="">
    <pre><code class="r">ggplot(dt, aes(year, cases, color = country))+
         ggtitle( &quot;Change over time&quot;) + 
         geom_line()
</code></pre>

<pre><code>## Error in ggplot(dt, aes(year, cases, color = country)): could not find function &quot;ggplot&quot;
</code></pre>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-44" style="background:;">
  
  <hgroup>
    <h2>Summary</h2>
  </hgroup>
  
  <article data-timings="">
    <ul>
<li>In a tidy dataset, each variable must have its own column</li>
<li>Each row corresponds to one unique observation</li>
<li>Each cell contains a single value</li>
<li>Tidy datasets are easier to work with</li>
<li>Data.table library has functions to transform un-tidy datasets to tidy</li>
</ul>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-45" style="background:;">
  
  <hgroup>
    <h2>Homework</h2>
  </hgroup>
  
  <article data-timings="">
    <ul>
<li>Read tidy data paper by Hadley Wickham (Wickham 2004, Journal of Statistical Software)</li>
<li>Transform your own dataset into tidy data </li>
<li>Come with a plot from your data that you want to improve on</li>
</ul>

  </article>
  <!-- Presenter Notes -->
  
</slide>

<slide class="" id="slide-46" style="background:;">
  
  <hgroup>
    <h2>Thanks! Questions?</h2>
  </hgroup>
  
  <article data-timings="">
    <p><br> 
<br> 
<br> 
<br> </p>

<blockquote>
<p>Happy families are all alike; every unhappy family is unhappy in its own way.</p>
</blockquote>

<p>Leo Tolstoy</p>

<p><br> </p>

<blockquote>
<p>Tidy datasets are all alike, but every messy dataset is messy in its own way.</p>
</blockquote>

<p>Hadley Wickham</p>

  </article>
  <!-- Presenter Notes -->
  
</slide>

    <slide class="backdrop"></slide>
  </slides>
  <div class="pagination pagination-small" id='io2012-ptoc' style="display:none;">
    <ul>
      
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=1 title='NA'>
         1
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=2 title='What is a data.table?'>
         2
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=3 title='Creating a data.table'>
         3
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=4 title='Converting a data frame to data.table'>
         4
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=5 title='Structure'>
         5
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=6 title='Accessing a data.table by rows (<em>i</em>)'>
         6
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=7 title='Subsetting rows according to some condition'>
         7
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=8 title='Subsetting (cont.)'>
         8
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=9 title='Accessing a data.table by columns (<em>j</em>)'>
         9
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=10 title='Data.table environment'>
         10
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=11 title='Accessing multiple columns'>
         11
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=12 title='Basic Operations'>
         12
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=13 title='Basic Operations on multiple columns'>
         13
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=14 title='Question 2:'>
         14
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=15 title='The &#39;by&#39; option'>
         15
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=16 title='The .N command'>
         16
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=17 title='Adding columns using :='>
         17
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=18 title='Manipulating and eliminating columns using :='>
         18
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=19 title='By reference'>
         19
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=20 title='Merging'>
         20
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=21 title='Merging - inner and outer examples'>
         21
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=22 title='Merging - left and right examples'>
         22
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=23 title='Question 3:'>
         23
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=24 title='Summary'>
         24
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=25 title='Part II: Tidy data'>
         25
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=26 title='Set up'>
         26
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=27 title='Pipe operator <code>%&gt;%</code>'>
         27
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=28 title='Tidy data definition'>
         28
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=29 title='Tidy data definition'>
         29
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=30 title='Common signs of un-tidy datasets'>
         30
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=31 title='Column headers are values, not variable names'>
         31
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=32 title='Column headers are values, not variable names'>
         32
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=33 title='Column headers are values, not variable names'>
         33
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=34 title='Multiple variables are stored in one column'>
         34
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=35 title='Variables are stored in both rows and columns'>
         35
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=36 title='Variables are stored in both rows and columns'>
         36
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=37 title='Multiple types of observational units are stored in the same table'>
         37
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=38 title='Multiple types of observational units are stored in the same table'>
         38
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=39 title='A single observational unit is stored in multiple tables'>
         39
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=40 title='Recap - same dataset, different representations'>
         40
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=41 title='Why is having a tidy dataset important?'>
         41
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=42 title='Tidy data can be easily manipulated'>
         42
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=43 title='Tidy data works better with many packages'>
         43
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=44 title='Summary'>
         44
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=45 title='Homework'>
         45
      </a>
    </li>
    
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=46 title='Thanks! Questions?'>
         46
      </a>
    </li>
    
    </ul>
  </div>  <!--[if IE]>
    <script 
      src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js">  
    </script>
    <script>CFInstall.check({mode: 'overlay'});</script>
  <![endif]-->
</body>
  <!-- Load Javascripts for Widgets -->
  <script src="libraries/widgets/bootstrap/js/bootstrap.min.js"></script>
<script src="libraries/widgets/bootstrap/js/bootbox.min.js"></script>
<script src="libraries/widgets/quiz/js/jquery.quiz.js"></script>
<script src="libraries/widgets/quiz/js/mustache.min.js"></script>
<script src="libraries/widgets/quiz/js/quiz-app.js"></script>

  <!-- MathJax: Fall back to local if CDN offline but local image fonts are not supported (saves >100MB) -->
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        processEscapes: true
      }
    });
  </script>
  <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  <!-- <script src="https://c328740.ssl.cf1.rackcdn.com/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script> -->
  
<script>window.MathJax || document.write('<script type="text/x-mathjax-config">MathJax.Hub.Config({"HTML-CSS":{imageFont:null}});<\/script><script src="libraries/widgets/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"><\/script>')
</script>

  <script>  
  $(function (){ 
    $("#example").popover(); 
    $("[rel='tooltip']").tooltip(); 
  });  
  </script>  
  
  <!-- LOAD HIGHLIGHTER JS FILES -->
  <script src="libraries/highlighters/highlight.js/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <!-- DONE LOADING HIGHLIGHTER JS FILES -->
   
  </html>